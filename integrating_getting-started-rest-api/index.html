<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="wbwangk">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>生成REST API - Hyperledger Composer中文文档</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "\u751f\u6210REST API";
    var mkdocs_page_input_path = "integrating_getting-started-rest-api.md";
    var mkdocs_page_url = "/integrating_getting-started-rest-api/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../introduction_introduction/" class="icon icon-home"> Hyperledger Composer中文文档</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../introduction_introduction/">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../introduction_introduction/">介绍</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">教程</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../tutorials_tutorials/">教程</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials_playground-tutorial/">Playground教程</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials_developer-tutorial/">开发者教程</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials_queries/">查询教程</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials_deploy-to-fabric-single-org/">为单个组织部署Hyperledger Fabric</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials_deploy-to-fabric-multi-org/">为多个组织部署Hyperledger Fabric</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">集成现有系统</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../integrating_integrating-index/">与现有系统集成</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">生成REST API</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#rest-api">生成一个REST API</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#rest">安装REST服务器</a></li>
        
            <li><a class="toctree-l4" href="#rest_1">运行REST服务器</a></li>
        
            <li><a class="toctree-l4" href="#rest_2">更新REST服务器</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#_1">总结</a></li>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_publishing-events/">从REST服务器发布事件</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_enabling-rest-authentication/">为REST服务器启用身份认证</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_enabling-multiuser/">为REST服务器启用多用户模式</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_securing-the-rest-server/">使用HTTPS和TLS来保护REST服务器</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_deploying-the-rest-server/">为业务网络部署REST服务器</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_node-red/">与Node-RED集成</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_call-out/">调用外部REST服务</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">管理已部署业务网络</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../managing_managingindex/">Managing managingindex</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_participantsandidentities/">参与者和身份</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_participant-add/">增加参与者</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_id-cards-playground/">创建、导出和导入业务网络卡片</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_identity-issue/">向参与者发放新的身份</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_identity-bind/">将现有身份绑定到参与者</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_identity-list/">列出业务网络中的所有身份</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_identity-revoke/">撤销参与者的身份</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_updating-composer/">更新Hyperledger Composer运行时</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../problems_diagnostics/">诊断问题</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">参考</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../reference-index/">Reference index</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_cto_language/">建模语言</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_query-language/">查询语言</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_connectionprofile/">连接配置文件</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_js_scripts/">交易处理器函数</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_commands/">Hyperledger Composer命令行</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_rest-server/">Hyperledger Composer REST服务器</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_glossary/">Hyperledger Composer术语</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../introduction_introduction/">Hyperledger Composer中文文档</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../introduction_introduction/">Docs</a> &raquo;</li>
    
      
        
          <li>集成现有系统 &raquo;</li>
        
      
    
    <li>生成REST API</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/wbwangk/ComposerDocs/edit/master/docs/integrating_getting-started-rest-api.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="rest-api">生成一个REST API<a class="headerlink" href="#rest-api" title="Permanent link">&para;</a></h1>
<h2 id="rest">安装REST服务器<a class="headerlink" href="#rest" title="Permanent link">&para;</a></h2>
<p>Hyperledger Composer REST服务器可以使用npm或Docker进行安装。</p>
<p>要使用npm进行安装，请运行以下命令：</p>
<pre><code class="bash">npm install -g composer-rest-server
</code></pre>

<p>要使用Docker安装REST服务器，请参阅<a href="https://hyperledger.github.io/composer/stable/integrating/deploying-the-rest-server.html">部署REST服务器</a>。</p>
<h2 id="rest_1">运行REST服务器<a class="headerlink" href="#rest_1" title="Permanent link">&para;</a></h2>
<p>Hyperledger Composer包含独立的Node.js进程，将业务网络公开为REST API。LoopBack框架用于生成由Swagger文档描述的Open API。</p>
<p>要启动REST服务器，只需输入：</p>
<pre><code class="bash">composer-rest-server
</code></pre>

<p>然后您将被要求输入关于你的业务网络的一些简单的细节。下面显示了使用已部署的业务网络的一个示例。</p>
<pre><code>? Enter the name of the business network card to use: admin@basic-sample-network
? Specify if you want namespaces in the generated REST API: always use namespaces
? Specify if you want to enable authentication for the REST API using Passport: No
? Specify if you want to enable event publication over WebSockets: Yes
? Specify if you want to enable TLS security for the REST API: No

To restart the REST server using the same options, issue the following command:
   composer-rest-server -c admin@basic-sample-network -n always -w true

Discovering types from business network definition ...
Discovered types from business network definition
Generating schemas for all types in business network definition ...
Generated schemas for all types in business network definition
Adding schemas for all types to Loopback ...
Added schemas for all types to Loopback
Web server listening at: http://localhost:3000
Browse your REST API at http://localhost:3000/explorer
</code></pre>

<h4 id="composer-rest-server"><code>composer-rest-server</code>命令<a class="headerlink" href="#composer-rest-server" title="Permanent link">&para;</a></h4>
<p>该<code>composer-rest-server</code>命令有多个选项用于定义安全性和身份认证：</p>
<pre><code class="bash">Options:
  -c, --card            The name of the business network card to use  [string]
  -n, --namespaces      Use namespaces if conflicting types exist  [string] [choices: &quot;always&quot;, &quot;required&quot;, &quot;never&quot;] [default: &quot;always&quot;]
  -p, --port            The port to serve the REST API on  [number]
  -a, --authentication  Enable authentication for the REST API using Passport  [boolean] [default: false]
  -m, --multiuser       Enable multiple user and identity management using wallets (implies -a)  [boolean] [default: false]
  -w, --websockets      Enable event publication over WebSockets  [boolean] [default: true]
  -t, --tls             Enable TLS security for the REST API  [boolean] [default: false]
  -e, --tlscert         File containing the TLS certificate  [string] [default: &quot;/usr/local/lib/node_modules/composer-rest-server/cert.pem&quot;]
  -k, --tlskey          File containing the TLS private key  [string] [default: &quot;/usr/local/lib/node_modules/composer-rest-server/key.pem&quot;]
  -h, --help            Show help  [boolean]
  -v, --version         Show version number  [boolean]
</code></pre>

<h4 id="api">看看生成的API<a class="headerlink" href="#api" title="Permanent link">&para;</a></h4>
<p>启动浏览器并转到给定的URL（<a href="http://0.0.0.0:3000/explorer">http：//0.0.0.0:3000/explorer</a>）。你会看到类似这样的屏幕。</p>
<p><img alt="回送1" src="https://hyperledger.github.io/composer/stable/assets/img/tutorials/developer/lb_explorer.png" /></p>
<h2 id="rest_2">更新REST服务器<a class="headerlink" href="#rest_2" title="Permanent link">&para;</a></h2>
<p>在更新业务网络定义之后，可以更新REST服务器以生成反映业务网络定义更新的新API。</p>
<p>要更新REST服务器，首先必须使用<code>ctrl-C</code>停止REST服务器。然后可以使用<code>composer-rest-server</code>重新启动REST服务器。</p>
<h1 id="_1">总结<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<p>在Hyperledger Composer运行时之上使用Loopback框架使我们能够基于已部署的业务网络模型生成特定于业务领域的REST API！</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../integrating_publishing-events/" class="btn btn-neutral float-right" title="从REST服务器发布事件">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../integrating_integrating-index/" class="btn btn-neutral" title="与现有系统集成"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>wbwangk(wbwang@inspur.com)</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/wbwangk/ComposerDocs/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../integrating_integrating-index/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../integrating_publishing-events/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js"></script>
      <script src="../search/require.js"></script>
      <script src="../search/search.js"></script>

</body>
</html>
