<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="wbwangk">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>为单个组织部署Hyperledger Fabric - Hyperledger Composer中文文档</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "\u4e3a\u5355\u4e2a\u7ec4\u7ec7\u90e8\u7f72Hyperledger Fabric";
    var mkdocs_page_input_path = "tutorials_deploy-to-fabric-single-org.md";
    var mkdocs_page_url = "/tutorials_deploy-to-fabric-single-org/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../introduction_introduction/" class="icon icon-home"> Hyperledger Composer中文文档</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../introduction_introduction/">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../introduction_introduction/">介绍</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">教程</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../tutorials_tutorials/">_</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials_playground-tutorial/">Playground教程</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials_developer-tutorial/">开发者教程</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials_queries/">查询教程</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">为单个组织部署Hyperledger Fabric</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#hyperledger-composerhyperledger-fabric">为单个组织部署Hyperledger Composer区块链网络到Hyperledger Fabric</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#_1">先决条件</a></li>
        
            <li><a class="toctree-l4" href="#hyperledger-fabric">步骤一：启动Hyperledger Fabric网络</a></li>
        
            <li><a class="toctree-l4" href="#hyperledger-fabric_1">步骤二：探索Hyperledger Fabric网络</a></li>
        
            <li><a class="toctree-l4" href="#profile">步骤三：建立连接profile</a></li>
        
            <li><a class="toctree-l4" href="#hyperledger-fabric_2">步骤四：定位Hyperledger Fabric管理员的证书和私钥</a></li>
        
            <li><a class="toctree-l4" href="#hyperledger-fabric_3">步骤五：为Hyperledger Fabric管理员创建一张商业网络卡片</a></li>
        
            <li><a class="toctree-l4" href="#hyperledger-fabric_4">步骤六：为Hyperledger Fabric管理员导入商业网络卡片</a></li>
        
            <li><a class="toctree-l4" href="#hyperledger-composerhyperledger-fabric-peer">步骤七：将Hyperledger Composer运行时安装到Hyperledger Fabric peer节点上</a></li>
        
            <li><a class="toctree-l4" href="#_7">步骤八：启动区块链商业网络</a></li>
        
            <li><a class="toctree-l4" href="#_8">步骤九：为商业网络管理员导入商业网络卡片</a></li>
        
            <li><a class="toctree-l4" href="#_9">步骤十：测试与区块链商业网络的连接</a></li>
        
            <li><a class="toctree-l4" href="#_10">结论</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials_deploy-to-fabric-multi-org/">为多个组织部署Hyperledger Fabric</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">集成现有系统</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../integrating_integrating-index/">_</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_getting-started-rest-api/">生成REST API</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_publishing-events/">从REST服务器发布事件</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_enabling-rest-authentication/">为REST服务器启用身份认证</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_enabling-multiuser/">为REST服务器启用多用户模式</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_securing-the-rest-server/">使用HTTPS和TLS来保护REST服务器</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_deploying-the-rest-server/">为业务网络部署REST服务器</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_node-red/">与Node-RED集成</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_call-out/">调用外部REST服务</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">管理已部署业务网络</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../managing_managingindex/">_</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_participantsandidentities/">参与者和身份</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_participant-add/">增加参与者</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_id-cards-playground/">创建、导出和导入业务网络卡片</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_identity-issue/">向参与者发放新的身份</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_identity-bind/">将现有身份绑定到参与者</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_identity-list/">列出业务网络中的所有身份</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_identity-revoke/">撤销参与者的身份</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_updating-composer/">更新Hyperledger Composer运行时</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../problems_diagnostics/">诊断问题</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">参考</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../reference-index/">_</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_cto_language/">建模语言</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_query-language/">查询语言</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_connectionprofile/">连接配置文件</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_js_scripts/">交易处理器函数</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_commands/">Hyperledger Composer命令行</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_rest-server/">Hyperledger Composer REST服务器</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_glossary/">Hyperledger Composer术语</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../introduction_introduction/">Hyperledger Composer中文文档</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../introduction_introduction/">Docs</a> &raquo;</li>
    
      
        
          <li>教程 &raquo;</li>
        
      
    
    <li>为单个组织部署Hyperledger Fabric</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/wbwangk/ComposerDocs/edit/master/docs/tutorials_deploy-to-fabric-single-org.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="hyperledger-composerhyperledger-fabric">为单个组织部署Hyperledger Composer区块链网络到Hyperledger Fabric<a class="headerlink" href="#hyperledger-composerhyperledger-fabric" title="Permanent link">&para;</a></h2>
<p><a href="https://hyperledger.github.io/composer/unstable/tutorials/deploy-to-fabric-single-org">原文</a></p>
<p>在<a href="https://hyperledger.github.io/composer/unstable/installing/development-tools.html">开发环境</a>中，为你创建了一个简单Hyperledger Fabric网络(<code>fabric-dev-servers</code>)，以及为部署区块链商业网络所需的所有Hyperledger Composer配置。</p>
<p>本教程将演示为单个组织将区块链商业网络部署到的Hyperledger Fabric实例，管理员需要执行的步骤，包括如何生成必需的Hyperledger Composer配置。随后的教程将演示如何将区块链商业网络部署到多个组织的Hyperledger Fabric实例。</p>
<h3 id="_1">先决条件<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<ol>
<li>在你继续前，确保你已经完成了<a href="https://hyperledger.github.io/composer/unstable/installing/development-tools.html">安装一个开发环境</a>中步骤。  </li>
</ol>
<h3 id="hyperledger-fabric">步骤一：启动Hyperledger Fabric网络<a class="headerlink" href="#hyperledger-fabric" title="Permanent link">&para;</a></h3>
<p>为了遵循本教程，必须必须启动Hyperledger Fabric网络。你可以使用开发环境中提供的简单Hyperledger Fabric网络，也可以使用你根据Hyperledger Fabric文档构建的自己的Hyperledger Fabric网络。</p>
<p>本教程将假设你使用开发环境中提供的简单Hyperledger Fabric网络。如果你使用自己的Hyperledger Fabric网络，则必须在下面详细介绍的配置和你自己的配置之间进行映射。</p>
<ol>
<li>通过运行以下命令启动一个干净的Hyperledger Fabric：</li>
</ol>
<pre><code class="bash">cd ~/fabric-tools
./stopFabric.sh
./teardownFabric.sh
./downloadFabric.sh
export FABRIC_VERSION=hlfv11        
./startFabric.sh
</code></pre>

<ol>
<li>删除你的钱包中的所有商业网络卡片。忽略无法找到商业网络卡片的错误，这是安全的：</li>
</ol>
<pre><code>composer card delete -n PeerAdmin@fabric-network
composer card delete -n admin@tutorial-network
</code></pre>

<h3 id="hyperledger-fabric_1">步骤二：探索Hyperledger Fabric网络<a class="headerlink" href="#hyperledger-fabric_1" title="Permanent link">&para;</a></h3>
<p>这一步将探索刚刚启动的Hyperledger Fabric网络，以便了解它是如何配置的，以及它由哪些组件组成。在后续步骤中配置Hyperledger Composer时，你将使用本节中的所有信息。</p>
<h4 id="_2">配置文件<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<p>在开发环境中提供的简单Hyperledger Fabric网络，已经使用Hyperledger Fabric配置工具<code>cryptogen</code>和<code>configtxgen</code>来配置。</p>
<p><code>cryptogen</code>的配置存储在下面的文件中：</p>
<pre><code>~/fabric-tools/fabric-scripts/hlfv11/composer/crypto-config.yaml
</code></pre>

<p><code>configtxgen</code>的配置存储在下面的文件中：</p>
<pre><code>~/fabric-tools/fabric-scripts/hlfv11/composer/configtx.yaml
</code></pre>

<p>你可以通过阅读Hyperledger Fabric文档来找到有关这些配置工具的更多信息，它们做什么和如何使用它们。</p>
<h4 id="_3">组织<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<p>简单的Hyperledger Fabric网络由一个叫做<code>Org1</code>的组织构成。该组织使用域名<code>org1.example.com</code>。此外，该组织的成员服务提供商(MSP)被称为<code>Org1MSP</code>。在本教程中，你将部署只有组织<code>Org1</code>才能与之交互的区块链商业网络。</p>
<h4 id="_4">网络组件<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<p>Hyperledger Fabric网络由多个组件组成：<br />
- 一个Org1的peer节点，名叫peer0.org1.example.com<br />
  - 请求端口是7051<br />
  - 事件hub端口是7053<br />
- 一个Org1的CA(Certificate Authority)，名叫ca.org1.example.com<br />
  - CA端口是7054<br />
- 一个排序节点，名叫orderer.example.com<br />
  - 排序端口是7050  </p>
<p>Hyperledger Fabric网络组件在Docker容器中运行。在Docker容器中运行Hyperledger Composer时，可以使用上面的名称（例如，<code>peer0.org1.example.com</code>）与Hyperledger Fabric网络进行交互。</p>
<p>本教程将在Docker主机上运行Hyperledger Composer命令，而不是在Docker网络内运行。这意味着Hyperledger Composer命令必须使用<code>localhost</code>主机名和暴露的容器端口与Hyperledger Fabric网络进行交互。</p>
<h4 id="_5">用户<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<p>组织<code>Org1</code>使用名为<code>Admin@org1.example.com</code>的用户进行配置。此用户是管理员。组织的管理员有权将区块链商业网络的代码安装到其组织的peer，并且还可以具有启动区块链商业网络的权限，具体取决于配置。在本教程中，你将以<code>Admin@org1.example.com</code>用户身份部署区块链商业网络。</p>
<p>用户<code>Admin@org1.example.com</code>有一组存储在下列目录中的证书和私钥文件：</p>
<pre><code>~/fabric-tools/fabric-scripts/hlfv11/composer/crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
</code></pre>

<p>你稍后将使用其中一些文件与Hyperledger Fabric网络进行交互。</p>
<p>除了管理员之外，<code>Org1</code>的CA（证书颁发机构）使用一个默认用户进行配置。此默认用户登记ID是<code>admin</code>，登记密码是<code>adminpw</code>。但是，这个用户无权部署区块链商业网络。</p>
<h4 id="_6">信道<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<p>最后，创建了一个名为<code>channel</code>的信道。peer节点<code>peer0.org1.example.com</code>已加入此通道。你只能将Hyperledger Composer区块链商业网络部署到已存在的信道，但您可以按照Hyperledger Fabric文档创建其他信道。</p>
<h3 id="profile">步骤三：建立连接profile<a class="headerlink" href="#profile" title="Permanent link">&para;</a></h3>
<p>连接profile指定了定位和连接Hyperledger Fabric网络所需的所有信息，例如所有Hyperledger Fabric网络组件的主机名和端口。在此步骤中，你将为Hyperledger Composer创建一个连接profile，用于连接到Hyperledger Fabric网络。</p>
<ol>
<li>
<p>创建一个名为的<code>connection.json</code>的连接profile。</p>
</li>
<li>
<p>通过将以下三行添加到<code>connection.json</code>顶部来提供连接profile的<code>name</code>和<code>type</code>属性：</p>
</li>
</ol>
<pre><code class="json">{
  &quot;name&quot;: &quot;fabric-network&quot;,
  &quot;type&quot;: &quot;hlfv1&quot;,
</code></pre>

<p>连接profile中的<code>name</code>属性给出Hyperledger Fabric网络的名称，所以稍后可以引用它。在刚创建的连接profile，名称是<code>fabric-network</code>。你可以使用喜欢的名字为Hyperledger Fabric网络命名。</p>
<p>Hyperledger Composer被设计为兼容不同类型的区块链网络。目前，仅支持Hyperledger Fabric v1.0，但你必须指定要使用的区块链网络的类型。Hyperledger Fabric v1.0的类型是<code>hlfv1</code>。</p>
<ol>
<li>必须指定用于连接到Hyperledger Fabric网络的MSP的名称：</li>
</ol>
<pre><code class="json">&quot;mspID&quot;: &quot;Org1MSP&quot;,
</code></pre>

<p>我们正在以<code>Org1</code>连接，<code>Org1</code>的MSP被称为<code>Org1MSP</code>。</p>
<p>我们必须指定要连接的Hyperledger Fabric网络中所有peer节点的主机名和端口。</p>
<pre><code class="json">&quot;peers&quot;: [
    {
        &quot;requestURL&quot;: &quot;grpc://localhost:7051&quot;,
        &quot;eventURL&quot;: &quot;grpc://localhost:7053&quot;
    }
],
</code></pre>

<p>在这里，我们已经指定了单个peer节点<code>peer0.org1.example.com</code>（使用主机名<code>localhost</code>），请求端口7051和事件hub端口7053。</p>
<p><code>peers</code>数组可以包含多个peer节点。如果您有多个peer节点，则应将其全部添加到peers数组中，以便Hyperledger Composer可以与它们进行交互。</p>
<p>区块链商业网络将部署到所有指定的peer节点。一旦区块链商业网络部署完毕，指定的peer节点将用于查询区块链商业网络、为交易背书和订阅事件。</p>
<ol>
<li>我们必须在Hyperledger Fabric网络中指定证书颁发机构（CA）的主机名和端口，用于登记现有用户和注册新用户。</li>
</ol>
<pre><code class="json">&quot;ca&quot;: {
    &quot;url&quot;: &quot;http://localhost:7054&quot;,
    &quot;name&quot;: &quot;ca.org1.example.com&quot;
},
</code></pre>

<p>这里我们指定了一个CA<code>ca.or1.example.com</code>（使用主机名<code>localhost</code>）和CA端口7054。</p>
<ol>
<li>我们必须指定要连接的Hyperledger Fabric中所有排序节点的主机名和端口。</li>
</ol>
<pre><code class="json">&quot;orderers&quot;: [
    {
        &quot;url&quot; : &quot;grpc://localhost:7050&quot;
    }
],
</code></pre>

<p>在这里，我们已经指定了一个排序节点<code>orderer.example.com</code>（使用主机名<code>localhost</code>）和排序端口7050。</p>
<p>该<code>orderers</code>数组可以包含多个排序节点。如果你有多个排序节点，则应将其全部添加到<code>orderers</code>数组中，以便Hyperledger Composer可以与其进行交互。</p>
<ol>
<li>我们必须指定一个现有信道的名称。我们会把区块链商业网络部署到信道<code>composerchannel</code>中。</li>
</ol>
<pre><code class="json">&quot;channel&quot;: &quot;composerchannel&quot;,
</code></pre>

<ol>
<li>最后，我们可以选择指定与区块链商业网络进行交互时，对交易背书的超时时间。</li>
</ol>
<pre><code class="json">  &quot;timeout&quot;: 300
}
</code></pre>

<p>在这里，我们已经指定了300秒的超时时间。如果一个交易需要超过300秒的时间来背书，那么将会抛出一个超时错误。</p>
<ol>
<li>保存你的更改到<code>connection.json</code>。完成的连接profile应该如下所示：</li>
</ol>
<pre><code class="json">{
  &quot;name&quot;: &quot;fabric-network&quot;,
  &quot;type&quot;: &quot;hlfv1&quot;,
  &quot;mspID&quot;: &quot;Org1MSP&quot;,
  &quot;peers&quot;: [
      {
          &quot;requestURL&quot;: &quot;grpc://localhost:7051&quot;,
          &quot;eventURL&quot;: &quot;grpc://localhost:7053&quot;
      }
  ],
  &quot;ca&quot;: {
      &quot;url&quot;: &quot;http://localhost:7054&quot;,
      &quot;name&quot;: &quot;ca.org1.example.com&quot;
  },
  &quot;orderers&quot;: [
      {
          &quot;url&quot; : &quot;grpc://localhost:7050&quot;
      }
  ],
  &quot;channel&quot;: &quot;composerchannel&quot;,
  &quot;timeout&quot;: 300
}
</code></pre>

<h3 id="hyperledger-fabric_2">步骤四：定位Hyperledger Fabric管理员的证书和私钥<a class="headerlink" href="#hyperledger-fabric_2" title="Permanent link">&para;</a></h3>
<p>要将区块链商业网络部署到Hyperledger Fabric网络，我们必须将自己认证为具有执行此操作权限的管理员。在这一步骤中，你可以定位出认证自己为管理员需要的文件。</p>
<p>我们的Hyperledger Fabric网络的管理员是一名叫<code>Admin@org1.example.com</code>的用户。该用户的证书和私钥文件存储在以下目录中：</p>
<pre><code>~/fabric-tools/fabric-scripts/hlfv11/composer/crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
</code></pre>

<p>你必须首先定位该用户的证书文件。证书是身份的公开部分。证书文件可以在<code>signcerts</code>子目录中找到，文件名是<code>Admin@org1.example.com-cert.pem</code>。如果你查看这个文件的内容，那么你会发现一个类似于下面的PEM编码证书：</p>
<pre><code>-----BEGIN CERTIFICATE-----
MIICGjCCAcCgAwIBAgIRANuOnVN+yd/BGyoX7ioEklQwCgYIKoZIzj0EAwIwczEL
MAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBG
cmFuY2lzY28xGTAXBgNVBAoTEG9yZzEuZXhhbXBsZS5jb20xHDAaBgNVBAMTE2Nh
Lm9yZzEuZXhhbXBsZS5jb20wHhcNMTcwNjI2MTI0OTI2WhcNMjcwNjI0MTI0OTI2
WjBbMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMN
U2FuIEZyYW5jaXNjbzEfMB0GA1UEAwwWQWRtaW5Ab3JnMS5leGFtcGxlLmNvbTBZ
MBMGByqGSM49AgEGCCqGSM49AwEHA0IABGu8KxBQ1GkxSTMVoLv7NXiYKWj5t6Dh
WRTJBHnLkWV7lRUfYaKAKFadSii5M7Z7ZpwD8NS7IsMdPR6Z4EyGgwKjTTBLMA4G
A1UdDwEB/wQEAwIHgDAMBgNVHRMBAf8EAjAAMCsGA1UdIwQkMCKAIBmrZau7BIB9
rRLkwKmqpmSecIaOOr0CF6Mi2J5H4aauMAoGCCqGSM49BAMCA0gAMEUCIQC4sKQ6
CEgqbTYe48az95W9/hnZ+7DI5eSnWUwV9vCd/gIgS5K6omNJydoFoEpaEIwM97uS
XVMHPa0iyC497vdNURA=
-----END CERTIFICATE-----
</code></pre>

<p>接下来，您必须找到该用户的私钥文件。私钥用于以这个身份对交易进行签名。私钥文件可以在<code>keystore</code>子目录中找到。私钥文件的名称是一个很长的十六进制字符串，后缀是<code>_sk</code>，例如<code>114aab0e76bf0c78308f89efc4b8c9423e31568da0c340ca187a9b17aa9a4457_sk</code>。每次生成配置文件名称都会更改。如果你看看这个文件的内容，那么你会发现一个PEM编码的私钥类似于以下内容：</p>
<pre><code>-----BEGIN PRIVATE KEY-----
MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg00IwLLBKoi/9ikb6
ZOAV0S1XeNGWllvlFDeczRKQn2uhRANCAARrvCsQUNRpMUkzFaC7+zV4mClo+beg
4VkUyQR5y5Fle5UVH2GigChWnUoouTO2e2acA/DUuyLDHT0emeBMhoMC
-----END PRIVATE KEY-----
</code></pre>

<p>记住这两个文件的路径，或将它们复制到上一步创建的连接profile<code>connection.json</code>相同的目录中。你将在下一步骤中需要这些文件。</p>
<h3 id="hyperledger-fabric_3">步骤五：为Hyperledger Fabric管理员创建一张商业网络卡片<a class="headerlink" href="#hyperledger-fabric_3" title="Permanent link">&para;</a></h3>
<p>商业网络卡片包含连接到区块链商业网络和底层Hyperledger Fabric网络所需的全部信息。此信息包括步骤三中创建的连接profile，以及步骤四中的管理员的证书和密钥。</p>
<p>在这一步中，你将创建一个商业网络卡片，供管理员用来将区块链商业网络部署到Hyperledger Fabric网络。</p>
<p>运行<code>composer card create</code>命令创建一个商业网络卡片。你必须指定在以前的步骤中创建或定位的所有三个文件的路径：</p>
<pre><code class="bash">composer card create -p connection.json -u PeerAdmin -c Admin@org1.example.com-cert.pem -k 114aab0e76bf0c78308f89efc4b8c9423e31568da0c340ca187a9b17aa9a4457_sk -r PeerAdmin -r ChannelAdmin
</code></pre>

<p>名为<code>PeerAdmin@fabric-network.card</code>的商业网络卡片文件将被写入当前目录。我们来探索一下传递给<code>composer card create</code>命令的选项。</p>
<pre><code>-p connection.json
</code></pre>

<p>这是我们在第三步创建的连接profile的路径。</p>
<pre><code>-u PeerAdmin
</code></pre>

<p>这是我们用来引用管理员用户的名字。代替使用<code>Admin@org1.example.com</code>，这个输入起来太长，我们给了一个名字<code>PeerAdmin</code>，这样我们就可以很容易地引用这个用户。</p>
<pre><code>-c Admin@org1.example.com-cert.pem
</code></pre>

<p>这是我们在第四步定位的用户<code>Admin@org1.example.com</code>的证书文件路径。</p>
<pre><code>-k 114aab0e76bf0c78308f89efc4b8c9423e31568da0c340ca187a9b17aa9a4457_sk
</code></pre>

<p>这是我们在第四步找到的用户<code>Admin@org1.example.com</code>的私钥文件路径。</p>
<pre><code>-r PeerAdmin -r ChannelAdmin
</code></pre>

<p>在这里，我们指定用户拥有哪些角色。此信息是必需的，以便Hyperledger Composer知道哪些用户能够执行哪些操作。用户<code>Admin@org1.example.com</code>是Hyperledger Fabric网络的管理员，具有角色<code>PeerAdmin</code>（能够安装链码）和角色<code>ChannelAdmin</code>（能够实例化链码）。</p>
<h3 id="hyperledger-fabric_4">步骤六：为Hyperledger Fabric管理员导入商业网络卡片<a class="headerlink" href="#hyperledger-fabric_4" title="Permanent link">&para;</a></h3>
<p>Hyperledger Composer只能使用放置在钱包中的商业网络卡片。钱包是包含商业网络卡片的文件系统上的目录。在这一步中，你将将步骤五中创建的商业网络卡片导入到钱包中，以便你可以在后续步骤中使用这个商业网络卡片。</p>
<p>运行<code>composer card import</code>命令将商业网络卡片导入钱包：</p>
<pre><code class="bash">composer card import -f PeerAdmin@fabric-network.card
</code></pre>

<p>我们来探索一下传递给<code>composer card import</code>命令的选项。</p>
<pre><code>-f PeerAdmin@fabric-network.card
</code></pre>

<p>这是我们在第五步创建的商业网络卡片文件的路径。</p>
<p>你现在可以通过引用名称<code>PeerAdmin@fabric-network</code>来使用此商业网络卡片。你现在已经准备好将区块链商业网络部署到Hyperledger Fabric网络。</p>
<p>我们将部署区块链商业网络<code>tutorial-network</code>，这是按照<a href="https://hyperledger.github.io/composer/unstable/tutorials/developer-tutorial.html">开发者教程</a>创建的。</p>
<h3 id="hyperledger-composerhyperledger-fabric-peer">步骤七：将Hyperledger Composer运行时安装到Hyperledger Fabric peer节点上<a class="headerlink" href="#hyperledger-composerhyperledger-fabric-peer" title="Permanent link">&para;</a></h3>
<p>Hyperledger Composer包含一个名为“Hyperledger Composer运行时”的组件，该组件提供用于托管和支持商业网络存档的所有功能，例如数据验证、错误处理、事务处理函数执行和访问控制。在Hyperledger Fabric术语中，Hyperledger Composer运行时是一个标准的链码。</p>
<p>在这一步中，你将在所有Hyperledger Fabric peer节点上安装Hyperledger Composer运行时。在Hyperledger Fabric中，这是一个链码安装操作。</p>
<p>运行以下<code>composer runtime install</code>命令将Hyperledger Composer运行时安装到你在步骤三中创建的连接profile中指定的所有Hyperledger Fabric peer节点上：</p>
<pre><code class="bash">composer runtime install -c PeerAdmin@fabric-network -n tutorial-network
</code></pre>

<p>我们来探索一下传递给<code>composer runtime install</code>命令的选项。</p>
<pre><code>-c PeerAdmin@fabric-network
</code></pre>

<p>这是我们在步骤六中导入到钱包中的商业网络卡片的名称。</p>
<pre><code>-n tutorial-network
</code></pre>

<p>你必须为每个区块链商业网络安装Hyperledger Composer运行时的副本，并指定区块链商业网络的名称。在这里，我们指定正在部署的区块链商业网络的名称<code>tutorial-network</code>。</p>
<h3 id="_7">步骤八：启动区块链商业网络<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>在这一步中，你将启动区块链商业网络。在Hyperledger Fabric术语中，这是链码实例化操作。</p>
<p>运行<code>composer network start</code>命令启动区块链商业网络：</p>
<pre><code class="bash">composer network start -c PeerAdmin@fabric-network -a tutorial-network.bna -A admin -S adminpw
</code></pre>

<p>我们来探索一下传递给<code>composer network start</code>命令的选项。</p>
<pre><code>-c PeerAdmin@fabric-network
</code></pre>

<p>这是我们在步骤六中导入到钱包中的商业网络卡片的名称。</p>
<pre><code>-a tutorial-network.bna
</code></pre>

<p>这是指向商业网络存档的路径，其中包含了我们名为<code>tutorial-network</code>的区块链商业网络的商业网络定义。</p>
<pre><code>-A admin
</code></pre>

<p>在部署区块链商业网络时，你必须创建至少一个将成为区块链商业网络管理员的参与者。此参与者负责将其他参与者加入区块链商业网络。在这里，我们正在指定要创建一个叫做<code>admin</code>的区块链商业网络管理员。</p>
<pre><code>-S adminpw
</code></pre>

<p>这指定我们的区块链商业网络管理员<code>admin</code>将使用登记密码<code>adminpw</code>从CA（证书颁发机构）请求证书和私钥。指定此选项时，为商业网络管理员指定的用户名称必须是一个已登记的ID(已经向CA注册)。</p>
<p>现在我们的区块链商业网络已经启动，我们可以使用已创建的商业网络卡片文件<code>admin@tutorial-network.card</code>与它进行交互。</p>
<h3 id="_8">步骤九：为商业网络管理员导入商业网络卡片<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>运行<code>composer card import</code>命令将商业网络卡片导入钱包：</p>
<pre><code class="bash">composer card import -f admin@tutorial-network.card
</code></pre>

<p>你现在可以通过指定名称<code>admin@tutorial-network</code>来使用此商业网络卡片。现在你已经准备好与正在运行的区块链商业网络进行交互了！</p>
<h3 id="_9">步骤十：测试与区块链商业网络的连接<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>运行<code>composer network ping</code>命令测试与区块链商业网络的连接：</p>
<pre><code class="bash">composer network ping -c admin@tutorial-network
</code></pre>

<h3 id="_10">结论<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>在本教程中，你已经了解了如何配置Hyperledger Composer以及连接到Hyperledger Fabric网络所需的所有信息，以及如何将区块链商业网络部署到Hyperledger Fabric网络。</p>
<p>如果你使用了开发环境中提供的简单Hyperledger Fabric网络，那么为什么不尝试按照Hyperledger Fabric文档构建自己的Hyperledger Fabric网络，并查看是否可以成功部署区块链商业网络？</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../tutorials_deploy-to-fabric-multi-org/" class="btn btn-neutral float-right" title="为多个组织部署Hyperledger Fabric">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../tutorials_queries/" class="btn btn-neutral" title="查询教程"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>wbwangk(wbwang@inspur.com)</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/wbwangk/ComposerDocs/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../tutorials_queries/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../tutorials_deploy-to-fabric-multi-org/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js"></script>
      <script src="../search/require.js"></script>
      <script src="../search/search.js"></script>

</body>
</html>
