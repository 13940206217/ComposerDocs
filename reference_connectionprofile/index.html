<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="wbwangk">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>连接配置文件 - Hyperledger Composer中文文档</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "\u8fde\u63a5\u914d\u7f6e\u6587\u4ef6";
    var mkdocs_page_input_path = "reference_connectionprofile.md";
    var mkdocs_page_url = "/reference_connectionprofile/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../introduction_introduction/" class="icon icon-home"> Hyperledger Composer中文文档</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <span class="caption-text">介绍</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../introduction_introduction/">介绍</a>
                </li>
                <li class="">
                    
    <a class="" href="../introduction_key-concepts/">关键概念</a>
                </li>
                <li class="">
                    
    <a class="" href="../introduction_solution-architecture/">典型解决方案架构</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">安装</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../installing_using-playground-locally/">本地安装Playground</a>
                </li>
                <li class="">
                    
    <a class="" href="../installing_development-tools/">安装开发环境</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">教程</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../tutorials_tutorials/">教程</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials_playground-tutorial/">Playground教程</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials_developer-tutorial/">开发者教程</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials_queries/">查询教程</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials_deploy-to-fabric-single-org/">为单个组织部署Hyperledger Fabric</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials_deploy-to-fabric-multi-org/">为多个组织部署Hyperledger Fabric</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">开发业务网络</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../business-network_business-network-index/">开发业务网络</a>
                </li>
                <li class="">
                    
    <a class="" href="../business-network_businessnetworkdefinition/">业务网络定义</a>
                </li>
                <li class="">
                    
    <a class="" href="../business-network_bnd-create/">创建一个业务网络定义</a>
                </li>
                <li class="">
                    
    <a class="" href="../business-network_bnd-deploy/">部署业务网络</a>
                </li>
                <li class="">
                    
    <a class="" href="../business-network_publishing-events/">发送事件</a>
                </li>
                <li class="">
                    
    <a class="" href="../business-network_testing/">测试业务网络</a>
                </li>
                <li class="">
                    
    <a class="" href="../business-network_bnd-publish/">发布模型或业务网络定义</a>
                </li>
                <li class="">
                    
    <a class="" href="../business-network_query/">查询和过滤业务网络数据</a>
                </li>
                <li class="">
                    
    <a class="" href="../business-network_programmatic-access-control/">可编程访问控制</a>
                </li>
                <li class="">
                    
    <a class="" href="../business-network_historian/">Hyperledger Composer历史库</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">开发应用程序</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../applications_applications-index/">开发应用程序</a>
                </li>
                <li class="">
                    
    <a class="" href="../applications_node/">编写Node.js应用程序</a>
                </li>
                <li class="">
                    
    <a class="" href="../applications_web/">编写Web或移动应用</a>
                </li>
                <li class="">
                    
    <a class="" href="../applications_subscribing-to-events/">订阅事件</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">集成现有系统</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../integrating_integrating-index/">集成现有系统</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_getting-started-rest-api/">生成REST API</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_publishing-events/">从REST服务器发布事件</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_enabling-rest-authentication/">为REST服务器启用身份认证</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_enabling-multiuser/">为REST服务器启用多用户模式</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_securing-the-rest-server/">使用HTTPS和TLS来保护REST服务器</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_deploying-the-rest-server/">为业务网络部署REST服务器</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_node-red/">与Node-RED集成</a>
                </li>
                <li class="">
                    
    <a class="" href="../integrating_call-out/">调用外部REST服务</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">管理已部署业务网络</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../managing_managingindex/">管理已部署业务网络</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_participantsandidentities/">参与者和身份</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_participant-add/">增加参与者</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_id-cards-playground/">创建、导出和导入业务网络卡片</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_identity-issue/">向参与者发放新的身份</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_identity-bind/">将现有身份绑定到参与者</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_identity-list/">列出业务网络中的所有身份</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_identity-revoke/">撤销参与者的身份</a>
                </li>
                <li class="">
                    
    <a class="" href="../managing_updating-composer/">更新Hyperledger Composer运行时</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../problems_diagnostics/">诊断问题</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">参考</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../reference-index/">参考</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_cto_language/">建模语言</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_acl_language/">访问控制语言</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_query-language/">查询语言</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">连接配置文件</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#_1">连接配置文件</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#_2">创建连接配置文件</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../reference_js_scripts/">交易处理器函数</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_commands/">Hyperledger Composer命令行</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_rest-server/">Hyperledger Composer REST服务器</a>
                </li>
                <li class="">
                    
    <a class="" href="../reference_glossary/">Hyperledger Composer术语</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../introduction_introduction/">Hyperledger Composer中文文档</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../introduction_introduction/">Docs</a> &raquo;</li>
    
      
        
          <li>参考 &raquo;</li>
        
      
    
    <li>连接配置文件</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/wbwangk/ComposerDocs/edit/master/docs/reference_connectionprofile.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="_1">连接配置文件<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<p>Hyperledger Composer使用连接配置文件连接到运行时。</p>
<h2 id="_2">创建连接配置文件<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<ol>
<li>创建一个名为<code>connection.json</code>的新文件，其中包含Hyperledger Fabric v1.0的以下信息。}</li>
</ol>
<p>为Hyperledger Fabric v1.0创建连接配置文件，使用以下格式：</p>
<pre><code class="json">    {
        &quot;type&quot;: &quot;hlfv1&quot;,
        &quot;orderers&quot;: [
           { &quot;url&quot; : &quot;grpc://localhost:7050&quot; }
        ],
        &quot;ca&quot;: { &quot;url&quot;: &quot;http://localhost:7054&quot;,
                &quot;name&quot;: &quot;ca.org1.example.com&quot;
        },
        &quot;peers&quot;: [
            {
                &quot;requestURL&quot;: &quot;grpc://localhost:7051&quot;,
                &quot;eventURL&quot;: &quot;grpc://localhost:7053&quot;
            }
        ],
        &quot;keyValStore&quot;: &quot;${HOME}/.composer-credentials&quot;,
        &quot;channel&quot;: &quot;composerchannel&quot;,
        &quot;mspID&quot;: &quot;Org1MSP&quot;,
        &quot;timeout&quot;: &quot;300&quot;
    }

If you are connecting to Hyperledger Fabric v1.0 and are not using TLS or if you don't need the trustedRoots and verify options of the Certificate Authority definition you can use the following simplified connection profile:

_Please note: The simplified version of the connection profile will only work if the relevant certificate authority has no name defined. If the certificate authority has a defined name, it must be specified._

    {
      type: 'hlfv1',
      name: 'hlfv1org1',
      orderers: [
        'grpc://localhost:7050'
      ],
      ca: {
        url: 'http://localhost:7054',
        name: 'ca.org1.example.com'
      },
      peers: [
        {
          requestURL: 'grpc://localhost:7051',
          eventURL: 'grpc://localhost:7053'
        },
        ],
      channel: 'composerchannel',
      mspID: 'Org1MSP',
      timeout: '300',
    };
</code></pre>

<ul>
<li>
<p><code>name</code> 是用于引用连接配置文件的名称，是必需的。</p>
</li>
<li>
<p><code>type</code>定义你将连接的Hyperledger Fabric的版本。连接到Hyperledger Fabric v1.0应是<code>hlfv1</code>。</p>
</li>
<li>
<p><code>ca</code>定义要连接的Hyperledger Fabric证书颁发机构的URL。如果你的证书颁发机构需要一个名称，则必须将其定义为<code>ca</code>以上第一个Hyperledger Fabric v1.0示例中所示的属性。</p>
</li>
<li>
<p><code>trustedRoots</code>和<code>verify</code>证书颁发机构的选项在这里描述<a href="https://fabric-sdk-node.github.io/global.html#TLSOptions">https://fabric-sdk-node.github.io/global.html#TLSOptions</a></p>
</li>
<li>
<p><code>orderers</code>是描述要与之通信的排序节点的对象数组。在<code>orderers</code>中，你必须定义每个排序节点的<code>url</code>。如果你通过TLS进行连接，则连接配置文件中的所有<code>url</code>属性都必须以<code>grpcs://</code>开头，并且还必须在<code>cert</code>属性中包含正确的TLS证书。</p>
</li>
<li>
<p><code>peers</code>是描述要与之通信的peer的对象数组。每个人都<code>peer</code>必须有一个定义<code>requestURL</code>和定义<code>eventURL</code>。如果你使用TLS进行连接，则每个<code>peer</code>都必须在<code>cert</code>属性中具有正确的TLS证书。</p>
</li>
<li>
<p><code>hostnameOverride</code> 仅在测试环境中使用，当服务器证书的主机名与运行服务器进程的实际主机端点不匹配时，应用程序可以通过将此属性设置为服务器证书主机名的值来解决客户端TLS验证失败的问题。</p>
</li>
<li>
<p>每个<code>cert</code>属性的实例都应该是包含PEM格式的TLS证书字符串。可以在每个<code>cert</code>属性中放置多个证书。
  <code>-----BEGIN CERTIFICATE----- ... -----END CERTIFICATE-----</code></p>
</li>
<li>
<p><code>mspid</code>是您的组织的成员服务提供商ID。它与你将用于与业务网络进行交互的登记ID相关联。</p>
</li>
<li>
<p><code>timeout</code>是一个可选属性，用于控制向peer和orderer发出的每个请求的超时时间。请注意，有些命令可能会发出几个连续的请求，超时将分别应用于每个请求。</p>
</li>
<li>
<p><code>globalCert</code>定义了在没有指定<code>cert</code>属性的情况下，用于所有peer和orderer的TLS证书。如果指定了一个<code>cert</code>属性，那么它仅覆盖相应peer或orderer的<code>globalCert</code>属性。</p>
</li>
<li>
<p><code>maxSendSize</code>是一个可选属性，它定义了发送给orderers和peer的出站grpc消息的大小限制。该值以兆字节定义。如果没有设置，grpc会设置一个默认值。设置此属性为<code>-1</code>会导致无大小限制。</p>
</li>
<li>
<p><code>maxRecvSize</code>是一个可选属性，用于定义从订购者和同伴接收到的入站grpc消息的大小限制。该值以兆字节定义。如果没有设置，grpc会设置一个默认值。设置此属性为<code>-1</code>会导致无大小限制。</p>
</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../reference_js_scripts/" class="btn btn-neutral float-right" title="交易处理器函数">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../reference_query-language/" class="btn btn-neutral" title="查询语言"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>wbwangk(wbwang@inspur.com)</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/wbwangk/ComposerDocs/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../reference_query-language/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../reference_js_scripts/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js"></script>
      <script src="../search/require.js"></script>
      <script src="../search/search.js"></script>

</body>
</html>
